<html>

<link href="css/form.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

<body class="main" style=''>

    <div class="divBack">
        <div class="contact-form-wrapper d-flex justify-content-center wow fadeIn">
            <form action="#" class="contact-form form" id="formData">
                <a href="index.html" class="navbar-brand ms-4 ms-lg-0">
                    <img class="img" src="./img/logo2.png" alt="" style="">
                </a>
                <h5 class="title neon">Introduzca sus datos</h5>
                <p class="description"> </p>
                <div class="divInput">
                    <input type="text" class="form-control rounded border-white mb-3 form-input" id="name" name="name"
                        placeholder="Nombre" required>
                </div>

                <div class="divInput">
                    <input type="email" class="form-control rounded border-white mb-3 form-input" placeholder="Email"
                        id="email" name="email" required>
                </div>
                <div class="divInput">
                    <input type="address" class="form-control rounded border-white mb-3 form-input" placeholder="DirecciÃ³n"
                        id="address" name="address" required>
                </div>
                <div class="divInput">
                    <textarea id="message" class="form-control rounded border-white mb-3 form-text-area" rows="5"
                        cols="30" id="msg" name="msg" placeholder="Mensaje" required></textarea>
                </div>
                <div class="submit-button-wrapper divInput">
                    <input id="sendTo" type="submit" value="Send" class="butt">
                </div>
            </form>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>

    <script>
        function getFormData($form) {
            var unindexed_array = $form.serializeArray();
            var indexed_array = {};

            $.map(unindexed_array, function (n, i) {
                indexed_array[n['name']] = n['value'];
            });

            return indexed_array;
        }
        $(document).ready(function () {
            $('#sendTo').on('click', function (e) {
                e.preventDefault();
                var dataString = getFormData($('#formData'))
                alert('Datos serializados: ' + getFormData($('#formData')));
                console.log(dataString);
                var dictstring = JSON.stringify(dataString);

                $.ajax({
                    type: "POST", // la variable type guarda el tipo de la peticion GET,POST,..
                    url: "http://localhost:4747/api/form", //url guarda la ruta hacia donde se hace la peticion
                    data: dataString, // data recive un objeto con la informacion que se enviara al servidor
                    success: function (datos) { //success es una funcion que se utiliza si el servidor retorna informacion
                        console.log(datos.promedio)
                    },
                   // dataType: dataType // El tipo de datos esperados del servidor. Valor predeterminado: Intelligent Guess (xml, json, script, text, html).
                })
            });
        });

    </script>
</body>

</html>